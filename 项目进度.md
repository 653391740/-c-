# 严选商城C端项目进度记录

## 项目概述
- **项目名称**: 严选商城C端
- **版本**: 1.0.0
- **技术栈**: Vue 2.7.16 + Vite 4.5.0 + SCSS
- **开发状态**: 初期开发阶段

## 项目结构
```
严选商城C端/
├── src/
│   ├── App.vue          # 主应用组件
│   ├── main.js          # 入口文件
│   ├── router/          # 路由配置
│   │   └── index.js
│   ├── api/             # API接口
│   │   └── home.js
│   ├── utils/           # 工具函数
│   │   └── request.js
│   ├── components/      # 通用组件
│   │   ├── title.vue
│   │   └── goodslist.vue
│   ├── views/           # 页面组件
│   │   ├── index/       # 布局组件
│   │   │   ├── index.vue
│   │   │   └── Footer.vue
│   │   ├── home/        # 首页
│   │   │   ├── index.vue
│   │   │   ├── banner.vue
│   │   │   ├── head.vue
│   │   │   ├── nav.vue
│   │   │   └── tuijian.vue
│   │   ├── cate/        # 分类页
│   │   │   └── index.vue
│   │   ├── cart/        # 购物车
│   │   │   └── index.vue
│   │   ├── user/        # 用户中心
│   │   │   └── index.vue
│   │   ├── login.vue    # 登录页
│   │   └── goodlist.vue # 商品列表页
│   └── assets/          # 静态资源
└── ...
```

## 已完成功能

### 1. 项目基础架构
- ✅ Vue 2项目初始化
- ✅ Vite构建工具配置
- ✅ SCSS样式预处理器配置
- ✅ 路由系统搭建
- ✅ 入口文件配置 (main.js)
- ✅ 主应用组件配置 (App.vue)
- ✅ 全局样式引入
- ✅ 图标字体引入

### 2. 页面框架
- ✅ 主应用组件 (App.vue)
- ✅ 布局组件 (index/index.vue)
- ✅ 底部导航栏 (index/Footer.vue)

### 3. 路由配置
- ✅ 首页路由 (/home)
- ✅ 分类页路由 (/cate)
- ✅ 购物车路由 (/cart)
- ✅ 用户中心路由 (/user)
- ✅ 登录页路由 (/login)
- ✅ 商品列表路由 (/goodslist)
- ✅ 路由守卫配置（基于token）
- ✅ 路由白名单配置
- ✅ 路由重定向配置

### 4. 底部导航栏
- ✅ 导航项：商场、分类、购物车、用户
- ✅ 导航状态切换
- ✅ 根据登录状态动态显示用户导航文本
- ✅ 图标样式配置

### 5. 首页模块 (/home)
- ✅ 轮播图组件 (banner.vue)
- ✅ 头部搜索和分类导航 (head.vue)
- ✅ 导航菜单 (nav.vue)
- ✅ 推荐商品展示 (tuijian.vue)
- ✅ 热门商品列表 (home/index.vue)
- ❌ 促销活动展示
- ❌ 搜索功能

### 6. 商品列表模块 (/goodlist)
- ✅ 商品列表页面 (goodlist.vue)
- ✅ 搜索框
- ✅ 排序功能（综合排序、销量、价格、好评度、店铺）
- ✅ 筛选功能
- ✅ 滚动加载

### 7. API接口模块 (api/home.js)
- ✅ 登录接口 (login)
- ✅ 获取分类接口 (getcate)
- ✅ 获取轮播图接口 (getbanner)
- ✅ 获取热门商品接口 (gethortgoods)
- ✅ 获取商品列表接口 (getgoodlist)

### 8. 网络请求模块 (utils/request.js)
- ✅ 基于axios的请求封装
- ✅ 请求拦截器（token处理）
- ✅ 响应拦截器
- ✅ 错误处理
- ✅ 请求超时处理

### 9. 通用组件模块 (components)
- ✅ 标题组件 (title.vue)
- ✅ 商品列表组件 (goodslist.vue)

## 待完成功能

### 1. 首页模块 (/home)
- ❌ 促销活动展示
- ❌ 搜索功能

### 2. 分类页模块 (/cate)
- ❌ 分类侧边栏
- ❌ 分类商品列表
- ❌ 分类筛选功能
- ❌ 分类排序功能

### 3. 购物车模块 (/cart)
- ❌ 购物车商品列表
- ❌ 商品数量调整
- ❌ 商品选择/取消选择
- ❌ 购物车商品总价计算
- ❌ 结算功能

### 4. 用户中心模块 (/user)
- ❌ 用户信息展示
- ❌ 订单管理
- ❌ 地址管理
- ❌ 收藏商品
- ❌ 浏览历史
- ❌ 退出登录

### 5. 登录模块 (/login)
- ❌ 登录表单
- ❌ 表单验证
- ❌ 登录接口调用
- ❌ Token存储与管理
- ❌ 登录状态维护

### 6. 通用功能
- ✅ 网络请求封装 (utils/request.js)
- ✅ API接口封装 (api/home.js)
- ✅ 通用组件 (components/title.vue, components/goodslist.vue)
- ✅ 错误处理
- ✅ 加载状态管理
- ❌ 状态管理（Vuex）
- ❌ 数据持久化
- ❌ 响应式布局适配

## 开发计划

### 第一阶段：基础功能实现
1. 完成登录模块功能
2. 引入状态管理（Vuex）
3. 实现数据持久化

### 第二阶段：核心功能开发
1. 分类页功能实现
2. 购物车功能实现
3. 用户中心功能实现

### 第三阶段：功能完善
1. 搜索功能实现
2. 促销活动展示
3. 订单管理功能
4. 地址管理功能

### 第四阶段：优化与测试
1. 性能优化
2. 兼容性测试
3. 功能测试
4. 用户体验优化

## 备注
- 项目目前处于初期开发阶段，主要功能模块已有基本实现
- 首页模块已实现轮播图、头部导航、导航菜单、推荐商品和热门商品列表
- 商品列表页面已实现搜索框、排序功能、筛选功能和滚动加载
- API接口和网络请求模块已基本完成
- 需要进一步实现分类页、购物车、用户中心和登录模块的具体业务逻辑

## 最后更新时间
2023年XX月XX日

## 遇到的问题

### 1. 技术选型问题
- **问题描述**: 在Vue 2和Vue 3之间进行选择时，考虑到项目兼容性和团队熟悉度，最终选择了Vue 2.7.16版本。
- **解决方案**: 使用Vue 2.7.16版本，该版本兼容Vue 2的API同时引入了部分Vue 3的特性，为将来可能的升级做准备。

### 2. 构建工具选择
- **问题描述**: 在Webpack和Vite之间进行选择时，考虑到开发体验和构建速度。
- **解决方案**: 选择Vite作为构建工具，利用其快速的热更新和构建速度提升开发效率。

### 3. 路由守卫配置
- **问题描述**: 在配置路由守卫时，需要处理未登录用户的访问权限问题。
- **解决方案**: 设置白名单路由，未登录用户只能访问白名单中的路由，其他路由需要登录后才能访问。

### 4. 底部导航栏状态管理
- **问题描述**: 底部导航栏需要根据当前路由高亮显示对应项，同时用户中心需要根据登录状态显示不同文本。
- **解决方案**: 使用activeIndex变量控制高亮状态，通过判断token是否存在来动态显示用户中心文本。

### 5. 页面组件结构设计
- **问题描述**: 如何设计页面组件结构以实现底部导航栏固定，内容区域可滚动的效果。
- **解决方案**: 在App.vue中设置padding-bottom为底部导航栏高度，内容区域可滚动，底部导航栏使用fixed定位。

### 6. 图标字体引入
- **问题描述**: 需要在项目中引入图标字体，但不确定最佳实践。
- **解决方案**: 使用iconfont图标字体，通过@font-face引入，并定义对应的class类名。

### 7. 状态管理方案
- **问题描述**: 项目需要状态管理来处理用户信息、购物车数据等，但尚未确定具体方案。
- **解决方案**: 计划引入Vuex进行状态管理，设计合理的状态结构，并考虑数据持久化方案。

### 8. 网络请求封装
- **问题描述**: 需要封装网络请求模块，处理请求拦截、响应拦截、错误处理等。
- **解决方案**: 计划基于axios封装request模块，统一处理请求头、token、错误处理等。

### 9. 响应式布局适配
- **问题描述**: 需要适配不同屏幕尺寸的设备，确保良好的用户体验。
- **解决方案**: 计划使用rem或vw/vh单位进行响应式布局，结合媒体查询处理不同屏幕尺寸。

### 10. 微前端集成
- **问题描述**: 项目可能需要作为微前端应用的一部分，需要考虑集成方案。
- **解决方案**: 已引入@micro-zoe/micro-app微前端框架，为将来可能的微前端集成做准备。

### 11. 商品列表滚动加载问题
- **问题描述**: 在goodslist.vue组件中，滚动加载功能存在问题。第86行的条件判断`if (this.params && !this.loading)`应该放在滚动事件监听内部，而不是外部。目前只有开始触发一下，导致一直滚动不刷新。
- **问题原因**: 滚动事件监听没有进行条件判断，导致每次滚动都会触发loadmore方法，而loadmore方法内部虽然有条件判断，但无法阻止滚动事件的频繁触发。
- **解决方案**: 将条件判断`if (this.params && !this.loading)`移到滚动事件监听内部，确保在滚动事件触发时先进行条件判断，避免不必要的性能消耗和错误触发。
- **代码修改建议**: 
  ```javascript
  // 修改前
  if (this.params && !this.loading) {
      window.addEventListener('scroll', () => {
          this.loadmore()
      })
  }
  
  // 修改后
  window.addEventListener('scroll', () => {
      if (this.params && !this.loading) {
          this.loadmore()
      }
  })
  ```